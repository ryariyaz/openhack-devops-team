- name: Setup .NET Core
uses: actions/setup-dotnet@v1
with:
dotnet-version: '3.1.202'
- name: Add Code Coverage Tools
working-directory: apis/poi/tests/UnitTests
run: dotnet add package coverlet.msbuild



- name: Install dependencies
run: dotnet restore apis/poi/web/*.csproj

- name: .NET Build Web
run: dotnet build --configuration Release --no-restore apis/poi/web/*.csproj



- name: .NET Build Unit Tests
run: dotnet build --configuration Release apis/poi/tests/UnitTests/UnitTests.csproj



- name: .NET Test
run: dotnet test --no-restore --verbosity normal apis/poi/tests/UnitTests /p:CollectCoverage=true /p:CoverletOutput=lcov/ /p:CoverletOutputFormat=lcov

- name: Coveralls
uses: coverallsapp/github-action@master
with:
github-token: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}
path-to-lcov: apis/poi/tests/UnitTests/lcov/coverage.info
base-path: apis/poi
flag-name: Unit
